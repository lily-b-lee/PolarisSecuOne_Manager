/* ========== Theme ==========
   Drop-in replacement for /css/customers.css
   ========================== */
:root{
  --bg:#f6f8fb;
  --card:#ffffff;
  --muted:#6b7280;
  --text:#0f172a;
  --line:#e5e7eb;
  --line-soft:#eef2f7;
  --brand:#2563eb;
  --brand-weak:#e8efff;
  --brand-ring:rgba(37,99,235,.18);
  --danger:#ef4444;
  --danger-bg:#fee2e2;
  --success:#16a34a;
  --radius:14px;
  --shadow:0 8px 24px rgba(2,6,23,.06);
  --shadow-strong:0 18px 40px rgba(2,6,23,.12);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0e12;
    --card:#12161c;
    --muted:#94a3b8;
    --text:#e5e7eb;
    --line:#1f2937;
    --line-soft:#111827;
    --brand:#3b82f6;
    --brand-weak:#0b1b33;
    --brand-ring:rgba(59,130,246,.22);
    --danger:#f87171;
    --danger-bg:#3b0d0e;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --shadow-strong:0 22px 48px rgba(0,0,0,.55);
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  font-family:Pretendard,Inter,system-ui,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;
  letter-spacing:.01em;
}

/* ===== 레이아웃 / 헤더 ===== */
.layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
main.content{padding:28px 28px 40px}
.page-head{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:18px;gap:12px}
.h1{font-weight:800;font-size:28px;line-height:1.25;margin:0}
.muted{color:var(--muted);font-size:13px}
.center{display:flex;align-items:center;gap:8px}
.badge{display:inline-block;padding:3px 9px;border-radius:999px;background:var(--brand-weak);font-size:12px;color:var(--brand);font-weight:600}
.hidden{display:none}

/* ===== 버튼 ===== */
.btn{
  --btn-pad-y:10px; --btn-pad-x:12px;
  padding:var(--btn-pad-y) var(--btn-pad-x);
  border-radius:12px;border:1px solid var(--line);
  background:var(--card); color:var(--text); cursor:pointer;
  transition:transform .14s ease, box-shadow .14s ease, border-color .14s ease, background .14s ease;
  box-shadow:0 0 0 0 rgba(37,99,235,0);
  font-weight:600;
}
.btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
.btn:active{transform:translateY(0)}
.btn.primary{
  background:linear-gradient(180deg, var(--brand), color-mix(in srgb, var(--brand) 88%, black)); 
  border-color:transparent;color:#fff;
}
.btn.primary:hover{box-shadow:0 14px 30px color-mix(in srgb, var(--brand) 30%, transparent)}
.btn.ghost{background:transparent;border-color:var(--line)}
.btn.ghost:hover{background:rgba(17,24,39,.03)}
.btn.danger{background:var(--danger-bg);border-color:var(--danger);color:#b91c1c}
.btn:disabled{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}

/* ===== 카드 / 테이블 공통 ===== */
.card{
  background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
  overflow:hidden; box-shadow:var(--shadow);
  margin-bottom:20px;
}
.card-head,.card-subhead{
  padding:12px 16px; display:flex; align-items:center; justify-content:space-between;
  background:linear-gradient(180deg, rgba(17,24,39,.02), transparent);
  border-bottom:1px solid var(--line);
}
.card-body{padding:16px}
.card-foot{border-top:1px solid var(--line);margin-top:12px;padding:12px 16px;background:rgba(17,24,39,.01)}
.actions-end{display:flex;gap:8px;justify-content:flex-end}

.table-wrap{width:100%;overflow:auto; border-radius:12px}
.table{
  width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed;
}
.table thead th{
  position:sticky; top:0; z-index:1;
  background:#f8fafc; color:#334155; border-bottom:1px solid var(--line);
  text-align:left; font-weight:800; font-size:12.5px; padding:11px 12px; letter-spacing:.02em;
}
@media (prefers-color-scheme: dark){
  .table thead th{background:#0f141b;color:#d1d5db;border-color:#1f2937}
}
.table thead th:first-child{border-top-left-radius:12px}
.table thead th:last-child{border-top-right-radius:12px}
.table tbody td{
  padding:12px 12px; border-bottom:1px solid var(--line-soft);
  font-size:14px; vertical-align:middle; white-space:nowrap; background:transparent;
}
.table th.num,.table td.num{text-align:right}
.table tbody tr{transition:background .12s ease}
.table tbody tr:hover{background:rgba(17,24,39,.03)}
.table tbody tr:nth-child(2n){background:rgba(17,24,39,.015)}
.table tbody tr:hover td{background:inherit}

/* 스크롤바 */
.table-wrap::-webkit-scrollbar{height:10px;width:10px}
.table-wrap::-webkit-scrollbar-thumb{background:#c9d2e1;border-radius:10px}
@media (prefers-color-scheme: dark){
  .table-wrap::-webkit-scrollbar-thumb{background:#2b3a4d}
}

/* ===== 목록 전용 ===== */
.toolbar{display:flex;gap:8px;align-items:center;justify-content:space-between;margin:12px 0}
.toolbar .left,.toolbar .right{display:flex;gap:8px;align-items:center}
.searchbox{
  height:40px;padding:9px 12px;border:1px solid var(--line);border-radius:12px;width:260px;
  background:var(--card); color:var(--text); transition:border-color .15s, box-shadow .15s;
}
.searchbox:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 6px var(--brand-ring)}
.caption{
  padding:10px 12px;color:var(--muted);border-top:1px solid var(--line-soft);
  background:rgba(17,24,39,.015); margin:36px 0 0;
}
#custTable td:nth-child(4){overflow:hidden;text-overflow:ellipsis}
#custTable tbody tr{cursor:pointer}
#custTable .quick{display:flex;gap:6px;justify-content:flex-end;opacity:0;transition:opacity .14s ease}
#custTable tbody tr:hover .quick{opacity:1}

/* 금액/퍼센트 뱃지 느낌 (원하면 td에 class 추가해서 사용) */
.badge.price{background:color-mix(in srgb, var(--brand) 10%, transparent); color:var(--brand)}
.badge.pct{background:rgba(2,6,23,.06); color:#0f172a}
@media (prefers-color-scheme: dark){
  .badge.pct{background:#0f141b;color:#cbd5e1}
}

/* ===== 통계 카드 ===== */
.stat-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 16px}
.stat{
  border:1px solid var(--line); border-radius:12px; padding:16px; background:var(--card);
  box-shadow:var(--shadow);
}
.stat .label{font-size:12px;color:var(--muted)}
.stat .value{font-weight:800;font-size:22px;margin-top:6px}

/* ===== 상세: 폼 ===== */
.form-grid{display:grid;grid-template-columns:140px 1fr;gap:12px 12px;align-items:center}
.form-grid label{text-align:right;padding-right:6px;color:#374151;white-space:nowrap;font-weight:600}
@media (prefers-color-scheme: dark){ .form-grid label{color:#cbd5e1} }
.form-grid input,.form-grid textarea,.form-grid select{
  width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:12px;
  font:inherit;background:var(--card);color:var(--text);transition:border-color .15s, box-shadow .15s;
}
.form-grid input:focus,.form-grid textarea:focus,.form-grid select:focus{
  outline:none;border-color:var(--brand);box-shadow:0 0 0 6px var(--brand-ring)
}
.form-grid input[type="number"]{text-align:right;font-variant-numeric:tabular-nums lining-nums}
.form-grid textarea{resize:vertical;min-height:84px}
.error{
  color:#b91c1c;min-height:18px;font-size:12px;margin-top:6px;
  background:color-mix(in srgb, var(--danger-bg) 60%, transparent); 
  border:1px solid color-mix(in srgb, var(--danger) 35%, transparent);
  padding:8px 10px;border-radius:10px;
}

/* ===== Modal ===== */
.modal-backdrop{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.38); z-index:5000; backdrop-filter:saturate(120%) blur(2px);
}
.modal-backdrop.show,
.modal-backdrop.open{ display:flex; }
.modal-backdrop[aria-hidden="true"]{ display:none !important; }

@keyframes modalPop{from{transform:translateY(10px) scale(.985);opacity:0}to{transform:none;opacity:1}}
.modal{
  width:min(720px, 95vw); max-height:90vh; overflow:auto; animation:modalPop .18s ease;
  background:var(--card); border-radius:18px; box-shadow:var(--shadow-strong); border:1px solid var(--line);
}
.modal header,.modal footer{
  padding:14px 16px; display:flex; align-items:center; justify-content:space-between; background:var(--card);
}
.modal header{ border-bottom:1px solid var(--line); }
.modal footer{ border-top:1px solid var(--line); }
.modal .content{ padding:16px; }
.modal h3{margin:0;font-size:18px;font-weight:800}
.btn.ghost#btnCloseModal{border:none;font-size:18px;line-height:1;padding:6px 8px;border-radius:10px;opacity:.8}
.btn.ghost#btnCloseModal:hover{background:rgba(17,24,39,.06);opacity:1}

/* ===== 반응형 ===== */
@media (max-width: 1080px){
  .layout{grid-template-columns:220px 1fr}
}
@media (max-width: 960px){
  .form-grid{grid-template-columns:1fr}
  .form-grid label{text-align:left;padding-right:0}
  main.content{padding:20px}
}
@media (max-width: 820px){
  .stat-cards{grid-template-columns:1fr}
  .toolbar .left{width:100%}
  .searchbox{flex:1; width:auto}
}

/* ===== 프로필 카드 접기/펼치기 ===== */
#profileCard[data-collapsed="true"] .card-body,
#profileCard[data-collapsed="true"] .card-foot{ display:none !important; }
#profileCard[data-collapsed="false"] .card-body{ display:block; }
#btnToggleProfile .chev{ transition: transform .2s ease; }
#btnToggleProfile[aria-expanded="false"] .chev{ transform: rotate(-90deg); }

/* ===== 보안 이벤트 ===== */
#evToolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:12px 0}
#evToolbar .pill{display:flex;align-items:center;gap:6px}
#evToolbar .pill label{font-size:12px;color:var(--muted)}
#evToolbar input[type="date"],
#evToolbar select{
  height:36px;padding:6px 10px;border:1px solid var(--line);border-radius:10px;background:var(--card);font:inherit;color:var(--text);
  transition:border-color .15s, box-shadow .15s;
}
#evToolbar input[type="date"]:focus,
#evToolbar select:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 6px var(--brand-ring)}
#evToolbar .btn{height:36px}

/* KPI */
.ev-kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:16px 0}
.ev-kpis .stat .value{font-size:22px}
@media (max-width:960px){ .ev-kpis{grid-template-columns:1fr 1fr} }
@media (max-width:600px){ .ev-kpis{grid-template-columns:1fr} }

/* 이벤트 테이블 */
#tblEvents thead th:nth-child(1){width:160px}
#tblEvents thead th:nth-child(2){width:150px}
#tblEvents thead th:nth-child(5){width:180px}
#tblEvents thead th:nth-child(6){width:120px}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,"Liberation Mono","Courier New",monospace}
.ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:420px}

/* 페이지네이션 */
.pagination{
  display:flex;gap:8px;align-items:center;justify-content:flex-end;
  padding:10px 12px;border-top:1px solid var(--line-soft); background:rgba(17,24,39,.01)
}
.pagination .btn{min-width:88px; margin-top:20px;}

/* 이벤트 타입 뱃지 */
.badge.malware{background:#fee2e2;color:#991b1b}
.badge.rooting{background:#fef9c3;color:#92400e}
.badge.remote{background:#e0f2fe;color:#075985}

/* 작은 유틸 */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
.text-right{text-align:right}
.text-center{text-align:center}
.round{border-radius:12px}

/* ========== 접근성: 모션 최소화 ========= */
@media (prefers-reduced-motion: reduce){
  *{transition:none !important; animation:none !important}
}
