<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>시큐뉴스 • 보안 콘솔</title>

  <!-- 공통 네비/레이아웃 -->
  <link rel="stylesheet" th:href="@{/css/nav.css}" href="/css/nav.css">
  <!-- 페이지 전용 스타일 -->
  <link rel="stylesheet" th:href="@{/css/newsletter.css}" href="/css/newsletter.css">
</head>
<body>
  <div class="layout">
    <!-- 사이드바: 활성 메뉴 = newsletter -->
    <div th:replace="~{fragments/nav :: sidebar(active=${'newsletter'}, mode=${'admin'})}"></div>

    <main class="content">
      <!-- 헤더 -->
      <header class="page-head" aria-describedby="todayText">
        <div>
          <h1 class="h1">시큐뉴스</h1>
          <div class="muted" id="todayText">-</div>
        </div>
        <!-- JS가 '총 N개' 전체 문구를 채웁니다 -->
        <div class="muted" id="totalCount">총 0개</div>
      </header>

      <!-- 카드 그리드 -->
      <section aria-labelledby="secTitle">
        <h2 id="secTitle" class="sr-only" style="position:absolute;left:-9999px">뉴스 목록</h2>
        <div id="grid" class="news-grid" aria-live="polite"></div>
      </section>
    </main>
  </div>

  <!-- 플로팅 액션 버튼: 새 뉴스 등록 -->
  <button type="button" class="fab" id="fabAdd" aria-label="뉴스 등록">
    <span aria-hidden="true">＋</span>
  </button>

  <!-- 추가/수정 모달 -->
  <div id="newsModal" class="modal" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="newsModalTitle">
      <header class="dialog-head">
        <div>
          <div id="newsModalTitle" class="title">시큐뉴스</div>
          <div class="subtitle">새 항목 추가</div>
        </div>
        <button type="button" class="close" data-close aria-label="닫기">×</button>
      </header>

      <form id="modalForm" class="dialog-body">
        <!-- 필드 -->
        <div class="field">
          <label for="mTitle">제목</label>
          <input id="mTitle" name="title" type="text" placeholder="제목을 입력하세요" required>
        </div>

        <div class="field">
          <label for="mCategory">카테고리</label>
          <input id="mCategory" name="category" type="text" placeholder="예: 보안 이슈 / 취약점 / 업데이트">
        </div>

        <div class="field">
          <label for="mDate">날짜</label>
          <input id="mDate" name="date" type="date">
        </div>

        <div class="field">
          <label for="mUrl">원문 URL</label>
          <input id="mUrl" name="url" type="url" placeholder="https://...">
        </div>

        <div class="field">
          <label for="mThumb">썸네일 URL</label>
          <input id="mThumb" name="thumbnail" type="url" placeholder="https://...">
        </div>

        <!-- 액션 -->
        <div class="actions">
          <button type="button" id="btnDelete" class="btn danger" style="margin-right:auto;display:none">삭제</button>
          <button type="button" class="btn ghost" data-close>취소</button>
          <button type="submit" class="btn primary">저장</button>
        </div>

        <div id="modalMsg" class="hint" aria-live="polite"></div>
      </form>
    </div>
  </div>

  <!-- 페이지 스크립트 -->
  <script th:src="@{/js/newsletter.js}" src="/js/newsletter.js" defer></script>
  <script th:src="@{/js/nav.js}" src="/js/nav.js" defer></script>
</body>
</html>
