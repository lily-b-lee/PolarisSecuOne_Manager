<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tracking 대시보드 • 보안 콘솔</title>

  <!-- 공통 -->
  <link rel="stylesheet" th:href="@{/css/nav.css}" href="/css/nav.css">
  <!-- 페이지 전용 -->
  <link rel="stylesheet" th:href="@{/css/track.css}" href="/css/track.css">
</head>
<body>
  <div class="layout">
    <!-- 활성 메뉴 = 보고서 -->
    <div th:replace="~{fragments/nav :: sidebar(active=${'reports'}, mode=${'admin'})}"></div>

    <main class="content">
      <!-- 헤더 -->
      <header class="page-head">
        <div>
          <h1 class="h1">Tracking 대시보드</h1>
          <div class="muted" id="todayText">-</div>
        </div>
        <div class="muted">범위 변경 후 새로고침</div>
      </header>

      <!-- 필터 -->
      <section class="filters">
        <label>시작일시
          <input id="startAt" type="datetime-local">
        </label>
        <label>종료일시
          <input id="endAt" type="datetime-local">
        </label>
        <button id="btnRefresh" class="btn primary" type="button">새로고침</button>
      </section>

      <!-- 탭 -->
      <nav class="tabbar" role="tablist" aria-label="대시보드 보기 전환">
        <button class="tab active" data-tab="overview" role="tab" aria-selected="true">개요</button>
        <button class="tab" data-tab="events" role="tab" aria-selected="false">이벤트 목록</button>
        <button class="tab" data-tab="users" role="tab" aria-selected="false">사용자 파일상태</button>
      </nav>

      <!-- 탭: 개요 -->
      <section id="tab-overview" class="tab-panel" role="tabpanel">
        <div class="cards">
          <article class="card">
            <header class="card-head">
              <div class="title">경로별 다운로드 수</div>
              <div class="muted">최근 범위</div>
            </header>
            <div class="body">
              <div class="chart" id="chartDownloads">차트 로딩 영역</div>
            </div>
          </article>

          <article class="card">
            <header class="card-head">
              <div class="title">파일별 삭제 전환율</div>
              <div class="muted">최근 범위</div>
            </header>
            <div class="body">
              <div class="chart" id="chartConversion">차트 로딩 영역</div>
            </div>
          </article>
        </div>
      </section>

      <!-- 탭: 이벤트 목록 -->
      <section id="tab-events" class="tab-panel hidden" role="tabpanel" aria-hidden="true">
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>시간</th>
                <th>사용자</th>
                <th>이벤트</th>
                <th>대상</th>
                <th>상세</th>
              </tr>
            </thead>
            <tbody id="eventsTbody"></tbody>
          </table>
          <div id="eventsEmpty" class="empty" hidden>표시할 이벤트가 없습니다.</div>
        </div>
      </section>

      <!-- 탭: 사용자 파일상태 -->
      <section id="tab-users" class="tab-panel hidden" role="tabpanel" aria-hidden="true">
        <div class="cards three">
          <article class="card">
            <header class="card-head"><div class="title">파일 상태 요약</div></header>
            <div class="body">
              <ul class="bullets" id="userSummary">
                <!-- JS가 채움 -->
              </ul>
            </div>
          </article>

          <article class="card">
            <header class="card-head"><div class="title">최근 이슈 파일</div></header>
            <div class="body">
              <ul class="list" id="issueFiles">
                <!-- JS가 채움 -->
              </ul>
            </div>
          </article>

          <article class="card">
            <header class="card-head"><div class="title">보호 조치 현황</div></header>
            <div class="body">
              <div class="chart small" id="chartProtection">차트 로딩 영역</div>
            </div>
          </article>
        </div>
      </section>
    </main>
  </div>

  <script th:src="@{/js/track.js}" src="/js/track.js"></script>
<script th:src="@{/js/nav.js}" src="/js/nav.js" defer></script>

</body>
</html>
